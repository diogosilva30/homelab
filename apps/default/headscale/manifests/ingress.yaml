apiVersion: v1
kind: Service
metadata:
  name: headscale-ui
spec:
  selector:
    app.kubernetes.io/name: headscale
  ports:
    - name: ui
      port: 80
      targetPort: 81
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: headscale
  annotations:
    gethomepage.dev/enabled: "true"
    gethomepage.dev/description: VPN management
    gethomepage.dev/group: Networking
    gethomepage.dev/icon: tailscale
    gethomepage.dev/name: Headscale
spec:
  rules:
    - host: vpn.$(DNS) # DNS will be replaced by kustomize
      http:
        paths:
          # - path: /web
          #   pathType: Prefix
          #   backend:
          #     service:
          #       name: headscale-ui
          #       port:
          #         name: ui
          - path: /
            pathType: Prefix
            backend:
              service:
                name: headscale
                port:
                  name: https

